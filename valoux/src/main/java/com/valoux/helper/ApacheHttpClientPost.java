package com.valoux.helper;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.UnsupportedEncodingException;


import org.apache.http.HttpResponse;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.entity.StringEntity;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.log4j.Logger;
import org.codehaus.jettison.json.JSONException;

public class ApacheHttpClientPost {
	private static final Logger LOGGER = Logger.getLogger(ApacheHttpClientPost.class);
 
    public static String postToURL(String url, String message, DefaultHttpClient httpClient) throws IOException, IllegalStateException, UnsupportedEncodingException, RuntimeException, JSONException {
    	
    	LOGGER.info("AppraisalWS : Enter Method postToURL");
    	 StringBuffer totalOutput = new StringBuffer();
    	try{
    	HttpPost postRequest = new HttpPost(url);
        
        StringEntity input = new StringEntity(message);
        
        input.setContentType("application/json");
        postRequest.setEntity(input);
        
        HttpResponse response = httpClient.execute(postRequest);
        System.out.println("response:"+response.getStatusLine().getStatusCode());
 
        if (response.getStatusLine().getStatusCode() != 200) {
            throw new RuntimeException("Failed : HTTP error code : "
                    + response.getStatusLine().getStatusCode());
        }
 
        BufferedReader br = new BufferedReader(
                new InputStreamReader((response.getEntity().getContent())));
 
        String output;
//        StringBuffer totalOutput = new StringBuffer();
        	System.out.println("Output from Server .... \n");
        while ((output = br.readLine()) != null) {
            System.out.println(output);
            totalOutput.append(output);
        }
      } catch (Exception e) {
    	  LOGGER.error("Error - ", e);
		}
    	
    	LOGGER.info("AppraisalWS : Exit Method postToURL");
        return totalOutput.toString();
    }
    public static void main(String[] args) throws IllegalStateException, UnsupportedEncodingException, IOException, RuntimeException, JSONException
    {
    	try {
//    		String url = "http://192.168.1.62/valoux/CRUD/appraisal-pdf16may-2.php";
//          String message = "{\"resData\":{\"appraisalList\":{\"name\":\"Ruby Appraisal\",\"shortDescription\":\"Lorem Ipsum is simply dummy\r\n text industry. Lorem Ipsum has dummy text of the printing and typesetting industry. Lorem Ipsum is simply\r\n dummy text industry. Lorem Ipsum has dummy text of the printing and typesetting industry. Lorem Ipsum\r\n is simply dummy text industry. Lorem Ipsum has dummy text of the printing and typesetting industry.\r\n Lorem Ipsum is simply dummy text industry. Lorem Ipsum has dummy text of the printing and typesetting\r\n industry. Lorem Ipsum is simply dummy text industry. Lorem Ipsum has dummy text of the printing and\r\n typesetting industry. Lorem Ipsum is simply dummy text industry. Lorem Ipsum has dummy text of the printing\r\n and typesetting industry. Lorem Ipsum is simply dummy text industry. Lorem Ipsum has dummy text of the\r\n printing and typesetting industry. Lorem Ipsum is simply dummy text industry. Lorem Ipsum has dummy\r\n text of the printing and typesetting industry. Lorem Ipsum is simply dummy text industry. Lorem Ipsum\r\n has dummy text of the printing and typesetting in\",\"appraisalStatus\":2,\"appraisalId\":29,\"consumerPublickey\"\r\n:\"kLTuXmeIkAgLhM8pBm5NvA==\",\"lastAppraisedDate\":\"\",\"marketValueDate\":\"\",\"marketValue\":0,\"appraisedValue\"\r\n:0,\"finalPrice\":0,\"priceChange\":3,\"changePercentage\":0,\"aStatus\":2,\"noOfItem\":1,\"noOfCollection\":1,\"collectionImages\"\r\n:[],\"itemImages\":[{\"itemImages\":[{\"itemImagePath\":\"Item_Profile9015_1463496811711.jpg\",\"imageId\":10}\r\n]}]},\"appraisalCount\":1,\"lastAppraisedDate\":\"\",\"marketValueDate\":\"\",\"lastAppraisedId\":\"\",\"marketValue\"\r\n:\"\",\"appraisedValue\":\"\",\"priceChange\":\"\",\"changePercentage\":0,\"finalPrice\":0,\"collectionList\":[{\"vcid\"\r\n:14,\"cname\":\"Ruby collection\",\"shortDescription\":\"Lorem Ipsum is simply dummy text industry. Lorem Ipsum\r\n has dummy text of the printing and typesetting industry.\",\"collectionStatus\":1,\"consumerPublicKey\":\"kLTuXmeIkAgLhM8pBm5NvA\r\n==\",\"itemList\":[{\"marketValue\":0,\"appraisedValue\":0,\"lastAppraisedDate\":0,\"marketValueDate\":0,\"lastAppraisedId\"\r\n:\"\",\"finalPrice\":0,\"priceChange\":3,\"changePercentage\":0,\"itemId\":15,\"name\":\"Ruby Ring\",\"designType\":\"2\"\r\n,\"gender\":1,\"itemTypeIt\":1,\"quantity\":1,\"sDescription\":\"Lorem Ipsum is simply dummy text industry. Lorem\r\n Ipsum has been the industry\u2019s standard dummy text ever since the 1500s.\",\"storeId\":1,\"itemStatus\":1\r\n,\"componentList\":[{\"itemComponentId\":7,\"componentType\":1,\"componentTypeName\":\"Diamonds\",\"componentName\"\r\n:\"Diamond\",\"componentQuantity\":1,\"vicStatus\":1,\"propertyFlag\":true,\"componentProperty\":{\"vdid\":3,\"clarityId\"\r\n:1,\"clarityName\":\"Flawless\",\"color\":1,\"colorName\":\"D\",\"cut\":1,\"cutName\":\"Excellent\",\"cutlet\":1,\"cutletName\"\r\n:\"None\",\"depth\":\"1.0\",\"depthPercentage\":\"10.0\",\"fancyColor\":1,\"fancyColorName\":\"Yellow\",\"fluorescence\"\r\n:1,\"fluorescenceName\":\"None\",\"girdleThicknessDescription\":1,\"girdleThicknessDescriptionName\":\"Rough\"\r\n,\"lengthWidthRatio\":\"2.0\",\"itemComponentId\":7,\"itemId\":15,\"placement\":2,\"placementName\":\"Unmounted\",\"polish\"\r\n:1,\"polishName\":\"Excellent\",\"secondaryHue\":1,\"secondaryHueName\":\"Yellowish\",\"shape\":10,\"shapeName\":\"Heart\"\r\n,\"singleWeight\":\"10.0\",\"status\":1,\"symmetry\":2,\"symmetryName\":\"Very Good\",\"tablePercentage\":\"10.0\",\"thickness\"\r\n:2,\"thicknessName\":\"Very Thick\",\"weightMeasure\":\"1.0\",\"diamondWidth\":\"1.0\",\"componentCertificate\":{\"ccid\"\r\n:3,\"lab\":2,\"labName\":\"EGL\"},\"componentPhotosImages\":[{\"cid\":8,\"fileType\":1,\"imgName\":\"ruby-stone-250x250\r\n.jpg\",\"imgStatus\":1,\"imgUrl\":\"Item_Component_1_7_0_1463496831172.jpg\",\"itemComponentId\":7}],\"componentReceiptsImages\"\r\n:[],\"componentCertificatesImages\":[],\"priceProperty\":{\"finalPrice\":\"0.0\",\"marketValue\":\"0.0\",\"quantity\"\r\n:1}}},{\"itemComponentId\":8,\"componentType\":3,\"componentTypeName\":\"Pearls\",\"componentName\":\"Perls\",\"componentQuantity\"\r\n:1,\"vicStatus\":1,\"propertyFlag\":true,\"componentProperty\":{\"blemish\":3,\"blemishName\":\"Moderately Blemished\"\r\n,\"color\":1,\"colorName\":\"Yellow\",\"composition\":1,\"compositionName\":\"Uniform\",\"createdBy\":\"kLTuXmeIkAgLhM8pBm5NvA\r\n==\",\"createdOn\":\"2016-05-17 18:45:21.0\",\"drilled\":1,\"drilledName\":\"Side\",\"enhancements\":1,\"enhancementsName\"\r\n:\"Dyeing\",\"itemComponentId\":8,\"itemId\":15,\"pearlsLength\":1,\"luster\":1,\"lusterName\":\"Excellent\",\"matching\"\r\n:1,\"matchingName\":\"Excellent\",\"pearlsMax\":2,\"measurements\":\"1.0\",\"pearlsMin\":1,\"modifiedBy\":\"kLTuXmeIkAgLhM8pBm5NvA\r\n==\",\"modifiedOn\":\"2016-05-18 12:15:02.0\",\"origin\":1,\"originName\":\"India\",\"pearlType\":2,\"pearlTypeName\"\r\n:\"Freshwater Cultured\",\"shape\":24,\"shapeName\":\"Button\",\"status\":1,\"pearlsStyle\":2,\"componentPhotosImages\"\r\n:[],\"componentReceiptsImages\":[],\"componentCertificatesImages\":[],\"priceProperty\":{\"quantity\":1}}},{\"itemComponentId\"\r\n:9,\"componentType\":4,\"componentTypeName\":\"Metals\",\"componentName\":\"Metal\",\"componentQuantity\":1,\"vicStatus\"\r\n:1,\"propertyFlag\":true,\"componentProperty\":{\"createdBy\":\"kLTuXmeIkAgLhM8pBm5NvA==\",\"createdOn\":\"2016-05-17\r\n 18:58:58.0\",\"itemComponentId\":9,\"itemId\":15,\"measurements\":\"1.0\",\"metalsType\":2,\"metalsTypeName\":\"Silver\"\r\n,\"modifiedBy\":\"kLTuXmeIkAgLhM8pBm5NvA==\",\"modifiedOn\":\"2016-05-18 13:04:02.0\",\"purity\":15,\"status\":1\r\n,\"typeDetermined\":1,\"typeDeterminedName\":\"Stamped\",\"typeSpecified\":\"2\",\"weight\":\"2.0\",\"componentPhotosImages\"\r\n:[],\"componentReceiptsImages\":[],\"componentCertificatesImages\":[],\"priceProperty\":{\"finalPrice\":\"0.0\"\r\n,\"marketValue\":\"0.0\",\"quantity\":1}}},{\"itemComponentId\":10,\"componentType\":2,\"componentTypeName\":\"Gemstones\"\r\n,\"componentName\":\"Ruby stone\",\"componentQuantity\":1,\"vicStatus\":1,\"propertyFlag\":true,\"componentProperty\"\r\n:{\"createdBy\":\"kLTuXmeIkAgLhM8pBm5NvA==\",\"createdOn\":\"2016-05-17 20:05:25.0\",\"cut\":3,\"cutName\":\"Cameo\"\r\n,\"enhancement\":2,\"enhancementName\":\"Irradiation\",\"gemstonesType\":2,\"gemstonesTypeName\":\"Andalusite\",\"itemComponentId\"\r\n:10,\"itemId\":15,\"measurements\":\"2\",\"modifiedBy\":\"kLTuXmeIkAgLhM8pBm5NvA==\",\"modifiedOn\":\"2016-05-18 12\r\n:26:57.0\",\"origin\":2,\"originName\":\"United States\",\"placement\":1,\"placementName\":\"Mounted\",\"shape\":16\r\n,\"shapeName\":\"Heart\",\"status\":1,\"weight\":\"2.0\",\"internalInclusions\":2,\"internalInclusionsName\":\"Crystal\"\r\n,\"externalInclusions\":2,\"externalInclusionsName\":\"Cavity\",\"componentPhotosImages\":[{\"cid\":9,\"fileType\"\r\n:1,\"imgName\":\"Ruby.jpg\",\"imgStatus\":1,\"imgUrl\":\"Item_Component_1_10_0_1463496868865.jpg\",\"itemComponentId\"\r\n:10}],\"componentReceiptsImages\":[],\"componentCertificatesImages\":[],\"priceProperty\":{\"quantity\":1}}}\r\n],\"itemImages\":[{\"itemImagePath\":\"Item_Profile9015_1463496811711.jpg\",\"imageId\":10}]},{\"marketValue\"\r\n:0,\"appraisedValue\":0,\"lastAppraisedDate\":0,\"marketValueDate\":0,\"lastAppraisedId\":\"\",\"finalPrice\":0,\"priceChange\"\r\n:3,\"changePercentage\":0,\"itemId\":16,\"name\":\"necklace\",\"designType\":\"2\",\"gender\":1,\"itemTypeIt\":4,\"quantity\"\r\n:3,\"sDescription\":\"Lorem Ipsum is simply dummy text industry. Lorem Ipsum has been the industry\u2019s standard\r\n dummy text ever since the 1500s.\",\"storeId\":1,\"itemStatus\":1,\"componentList\":[{\"itemComponentId\":11\r\n,\"componentType\":1,\"componentTypeName\":\"Diamonds\",\"componentName\":\"blue diamond\",\"componentQuantity\"\r\n:1,\"vicStatus\":1,\"propertyFlag\":true,\"componentProperty\":{\"vdid\":4,\"clarityId\":3,\"clarityName\":\"VVS1\"\r\n,\"color\":2,\"colorName\":\"E\",\"cut\":2,\"cutName\":\"Very Good\",\"itemComponentId\":11,\"itemId\":16,\"placement\"\r\n:1,\"placementName\":\"Mounted\",\"shape\":10,\"shapeName\":\"Heart\",\"singleWeight\":\"1.0\",\"status\":1,\"componentCertificate\"\r\n:{\"ccid\":4,\"lab\":1,\"labName\":\"AGS\"},\"componentPhotosImages\":[{\"cid\":7,\"fileType\":1,\"imgName\":\"blue-saphire-stone-or-Neelam\r\n.jpg\",\"imgStatus\":1,\"imgUrl\":\"Item_Component_1_11_0_1463496775356.jpg\",\"itemComponentId\":11}],\"componentReceiptsImages\"\r\n:[],\"componentCertificatesImages\":[],\"priceProperty\":{\"finalPrice\":\"0.0\",\"marketValue\":\"0.0\",\"quantity\"\r\n:1}}}],\"itemImages\":[{\"itemImagePath\":\"Item_Profile7016_1463496758901.jpg\",\"imageId\":9}]}],\"marketValue\"\r\n:0,\"appraisedValue\":0,\"priceChange\":3,\"changePercentage\":0,\"noOfItem\":2}],\"itemsCount\":1,\"itemsList\"\r\n:[{\"itemId\":15,\"name\":\"Ruby Ring\",\"designType\":\"2\",\"gender\":1,\"itemTypeIt\":1,\"quantity\":1,\"sDescription\"\r\n:\"Lorem Ipsum is simply dummy text industry. Lorem Ipsum has been the industry\u2019s standard dummy text\r\n ever since the 1500s.\",\"storeId\":1,\"marketValue\":0,\"appraisedValue\":0,\"lastAppraisedDate\":\"\",\"marketValueDate\"\r\n:\"\",\"finalPrice\":0,\"priceChange\":3,\"changePercentage\":0,\"itemStatus\":1,\"componentList\":[{\"itemComponentId\"\r\n:7,\"componentType\":1,\"componentTypeName\":\"Diamonds\",\"componentName\":\"Diamond\",\"componentQuantity\":1,\"vicStatus\"\r\n:1,\"propertyFlag\":true,\"componentProperty\":{\"vdid\":3,\"clarityId\":1,\"clarityName\":\"Flawless\",\"color\":1\r\n,\"colorName\":\"D\",\"cut\":1,\"cutName\":\"Excellent\",\"cutlet\":1,\"cutletName\":\"None\",\"depth\":\"1.0\",\"depthPercentage\"\r\n:\"10.0\",\"fancyColor\":1,\"fancyColorName\":\"Yellow\",\"fluorescence\":1,\"fluorescenceName\":\"None\",\"girdleThicknessDescription\"\r\n:1,\"girdleThicknessDescriptionName\":\"Rough\",\"lengthWidthRatio\":\"2.0\",\"itemComponentId\":7,\"itemId\":15\r\n,\"placement\":2,\"placementName\":\"Unmounted\",\"polish\":1,\"polishName\":\"Excellent\",\"secondaryHue\":1,\"secondaryHueName\"\r\n:\"Yellowish\",\"shape\":10,\"shapeName\":\"Heart\",\"singleWeight\":\"10.0\",\"status\":1,\"symmetry\":2,\"symmetryName\"\r\n:\"Very Good\",\"tablePercentage\":\"10.0\",\"thickness\":2,\"thicknessName\":\"Very Thick\",\"weightMeasure\":\"1.0\"\r\n,\"diamondWidth\":\"1.0\",\"componentCertificate\":{\"ccid\":3,\"lab\":2,\"labName\":\"EGL\"},\"componentPhotosImages\"\r\n:[{\"cid\":8,\"fileType\":1,\"imgName\":\"ruby-stone-250x250.jpg\",\"imgStatus\":1,\"imgUrl\":\"Item_Component_1_7_0_1463496831172\r\n.jpg\",\"itemComponentId\":7}],\"componentReceiptsImages\":[],\"componentCertificatesImages\":[],\"priceProperty\"\r\n:{\"finalPrice\":\"0.0\",\"marketValue\":\"0.0\",\"quantity\":1}}},{\"itemComponentId\":8,\"componentType\":3,\"componentTypeName\"\r\n:\"Pearls\",\"componentName\":\"Perls\",\"componentQuantity\":1,\"vicStatus\":1,\"propertyFlag\":true,\"componentProperty\"\r\n:{\"blemish\":3,\"blemishName\":\"Moderately Blemished\",\"color\":1,\"colorName\":\"Yellow\",\"composition\":1,\"compositionName\"\r\n:\"Uniform\",\"createdBy\":\"kLTuXmeIkAgLhM8pBm5NvA==\",\"createdOn\":\"2016-05-17 18:45:21.0\",\"drilled\":1,\"drilledName\"\r\n:\"Side\",\"enhancements\":1,\"enhancementsName\":\"Dyeing\",\"itemComponentId\":8,\"itemId\":15,\"pearlsLength\":1\r\n,\"luster\":1,\"lusterName\":\"Excellent\",\"matching\":1,\"matchingName\":\"Excellent\",\"pearlsMax\":2,\"measurements\"\r\n:\"1.0\",\"pearlsMin\":1,\"modifiedBy\":\"kLTuXmeIkAgLhM8pBm5NvA==\",\"modifiedOn\":\"2016-05-18 12:15:02.0\",\"origin\"\r\n:1,\"originName\":\"India\",\"pearlType\":2,\"pearlTypeName\":\"Freshwater Cultured\",\"shape\":24,\"shapeName\":\"Button\"\r\n,\"status\":1,\"pearlsStyle\":2,\"componentPhotosImages\":[],\"componentReceiptsImages\":[],\"componentCertificatesImages\"\r\n:[],\"priceProperty\":{\"quantity\":1}}},{\"itemComponentId\":9,\"componentType\":4,\"componentTypeName\":\"Metals\"\r\n,\"componentName\":\"Metal\",\"componentQuantity\":1,\"vicStatus\":1,\"propertyFlag\":true,\"componentProperty\"\r\n:{\"createdBy\":\"kLTuXmeIkAgLhM8pBm5NvA==\",\"createdOn\":\"2016-05-17 18:58:58.0\",\"itemComponentId\":9,\"itemId\"\r\n:15,\"measurements\":\"1.0\",\"metalsType\":2,\"metalsTypeName\":\"Silver\",\"modifiedBy\":\"kLTuXmeIkAgLhM8pBm5NvA\r\n==\",\"modifiedOn\":\"2016-05-18 13:04:02.0\",\"purity\":15,\"status\":1,\"typeDetermined\":1,\"typeDeterminedName\"\r\n:\"Stamped\",\"typeSpecified\":\"2\",\"weight\":\"2.0\",\"componentPhotosImages\":[],\"componentReceiptsImages\":[\r\n],\"componentCertificatesImages\":[],\"priceProperty\":{\"finalPrice\":\"0.0\",\"marketValue\":\"0.0\",\"quantity\"\r\n:1}}},{\"itemComponentId\":10,\"componentType\":2,\"componentTypeName\":\"Gemstones\",\"componentName\":\"Ruby stone\"\r\n,\"componentQuantity\":1,\"vicStatus\":1,\"propertyFlag\":true,\"componentProperty\":{\"createdBy\":\"kLTuXmeIkAgLhM8pBm5NvA\r\n==\",\"createdOn\":\"2016-05-17 20:05:25.0\",\"cut\":3,\"cutName\":\"Cameo\",\"enhancement\":2,\"enhancementName\":\"Irradiation\"\r\n,\"gemstonesType\":2,\"gemstonesTypeName\":\"Andalusite\",\"itemComponentId\":10,\"itemId\":15,\"measurements\":\"2\"\r\n,\"modifiedBy\":\"kLTuXmeIkAgLhM8pBm5NvA==\",\"modifiedOn\":\"2016-05-18 12:26:57.0\",\"origin\":2,\"originName\"\r\n:\"United States\",\"placement\":1,\"placementName\":\"Mounted\",\"shape\":16,\"shapeName\":\"Heart\",\"status\":1,\"weight\"\r\n:\"2.0\",\"internalInclusions\":2,\"internalInclusionsName\":\"Crystal\",\"externalInclusions\":2,\"externalInclusionsName\"\r\n:\"Cavity\",\"componentPhotosImages\":[{\"cid\":9,\"fileType\":1,\"imgName\":\"Ruby.jpg\",\"imgStatus\":1,\"imgUrl\"\r\n:\"Item_Component_1_10_0_1463496868865.jpg\",\"itemComponentId\":10}],\"componentReceiptsImages\":[],\"componentCertificatesImages\"\r\n:[],\"priceProperty\":{\"quantity\":1}}}],\"itemImages\":[{\"itemImagePath\":\"Item_Profile9015_1463496811711\r\n.jpg\",\"imageId\":10}]}]},\"sCode\":1}";
//      	 String message = "{\r\n\"paparam\":{\r\n\"addSubscriptionPlan\":{\r\n\"autoRenewal\":1,\r\n\"planId\":1,\r\n\"userId\":20\r\n}\r\n}\r\n}";
//      	String message = new String(Files.readAllBytes(Paths.get("input.txt")));
//      	System.out.println("message=="+message);
//  		JSONObject json = new JSONObject(Input_XML_String);
//      	DefaultHttpClient httpClient = new DefaultHttpClient();
//          String response = postToURL(url, message, httpClient);
//          System.out.println("response:="+response);
//          System.out.println("Exit");
    		
		} catch (Exception e) {
			e.printStackTrace();
		}
    	
    }
}